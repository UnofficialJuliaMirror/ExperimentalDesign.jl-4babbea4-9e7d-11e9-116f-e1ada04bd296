<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>ExperimentalDesign.jl Documentation · ExperimentalDesign</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>ExperimentalDesign</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href="index.html">ExperimentalDesign.jl Documentation</a><ul class="internal"></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="index.html">ExperimentalDesign.jl Documentation</a></li></ul><a class="edit-page" href="https://github.com/phrb/ExperimentalDesign.jl/blob/master/docs/src/index.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>ExperimentalDesign.jl Documentation</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="ExperimentalDesign.jl-Documentation-1" href="#ExperimentalDesign.jl-Documentation-1">ExperimentalDesign.jl Documentation</a></h1><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExperimentalDesign.d_efficiency_lower_bound-Tuple{Array{Float64,2}}" href="#ExperimentalDesign.d_efficiency_lower_bound-Tuple{Array{Float64,2}}"><code>ExperimentalDesign.d_efficiency_lower_bound</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">d_efficiency_lower_bound(model_matrix::Array{Float64, 2})</code></pre><p>Compute a lower bound for the <span>$D$</span>-efficiency of a given design&#39;s model matrix according to Castillo&#39;s &quot;Process Optimization : A Statistical Approach&quot;.</p><pre><code class="language-julia-repl">julia&gt; using ExperimentalDesign, DataStructures, StatsModels

julia&gt; A = plackett_burman(4)
4×3 Array{Int64,2}:
  1   1   1
  1  -1  -1
 -1  -1   1
 -1   1  -1

julia&gt; factors = OrderedDict([(:f1, [-1., 1.]), (:f2, [-1., 1.]), (:f3, [-1., 1.])])
DataStructures.OrderedDict{Symbol,Array{Float64,1}} with 3 entries:
  :f1 =&gt; [-1.0, 1.0]
  :f2 =&gt; [-1.0, 1.0]
  :f3 =&gt; [-1.0, 1.0]

julia&gt; m = generate_model_matrix(@formula(y ~ f1 + f2 + f3), float(A), factors)
4×4 Array{Float64,2}:
 1.0   1.0   1.0   1.0
 1.0   1.0  -1.0  -1.0
 1.0  -1.0  -1.0   1.0
 1.0  -1.0   1.0  -1.0

julia&gt; d_efficiency_lower_bound(m)
1.0
</code></pre><p><strong>Formula</strong></p><p>For a design <span>$A_{n,p}$</span> with <span>$n$</span> experiments or rows, <span>$p$</span> factors or columns, and model matrix <span>$\mathbf{X}$</span>, the lower bound for the <span>$D$</span>-efficiency of <span>$A$</span> is:</p><div>\[D_{eff}^{(L)} = \dfrac{|\mathbf{X}^{\prime}\mathbf{X}|^{1/p}}{n}\]</div></div><a class="source-link" target="_blank" href="https://github.com/phrb/ExperimentalDesign.jl/blob/4ab87f37a61d60245f5c5af36e7c20df91306428/src/d_optimal/criteria.jl#L65-L108">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExperimentalDesign.d_optimality-Tuple{Array{Float64,2}}" href="#ExperimentalDesign.d_optimality-Tuple{Array{Float64,2}}"><code>ExperimentalDesign.d_optimality</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">d_optimality(model_matrix::Array{Float64, 2})</code></pre><p>Compute the <span>$D$</span>-optimality of a given design&#39;s model matrix.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using ExperimentalDesign, DataStructures, StatsModels

julia&gt; A = plackett_burman(4)
4×3 Array{Int64,2}:
  1   1   1
  1  -1  -1
 -1  -1   1
 -1   1  -1

julia&gt; factors = OrderedDict([(:f1, [-1., 1.]), (:f2, [-1., 1.]), (:f3, [-1., 1.])])
DataStructures.OrderedDict{Symbol,Array{Float64,1}} with 3 entries:
  :f1 =&gt; [-1.0, 1.0]
  :f2 =&gt; [-1.0, 1.0]
  :f3 =&gt; [-1.0, 1.0]

julia&gt; m = generate_model_matrix(@formula(y ~ f1 + f2 + f3), float(A), factors)
4×4 Array{Float64,2}:
 1.0   1.0   1.0   1.0
 1.0   1.0  -1.0  -1.0
 1.0  -1.0  -1.0   1.0
 1.0  -1.0   1.0  -1.0

julia&gt; d_optimality(m)
256.0
</code></pre><p><strong>Formula</strong></p><p>The <span>$D$</span>-optimality of a design is the determinant of the information matrix <span>$\mathbf{X}^{\prime}\mathbf{X}$</span>, where <span>$\mathbf{X}$</span> is the model matrix of a design.</p></div><a class="source-link" target="_blank" href="https://github.com/phrb/ExperimentalDesign.jl/blob/4ab87f37a61d60245f5c5af36e7c20df91306428/src/d_optimal/criteria.jl#L17-L58">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExperimentalDesign.expand_factors-Tuple{DataStructures.OrderedDict}" href="#ExperimentalDesign.expand_factors-Tuple{DataStructures.OrderedDict}"><code>ExperimentalDesign.expand_factors</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">expand_factors(factors::OrderedDict)</code></pre><p>Return an <code>OrderedDict</code> with true factors expanded to <code>[0., 1.]</code> 2-level numerical factors.</p><p>For a true factor with <span>$n$</span> levels, creates <span>$n - 1$</span> 2-level factors. Only one of these new factors can be at level <code>1.</code> at each row of a design, encoding each level of the original factor. The first level of the original factor is encoded by all new factors being at level <code>0.</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using ExperimentalDesign, DataStructures, StatsModels

julia&gt; A = OrderedDict(:A =&gt; [1., 2.], :B =&gt; [1, 2, 3, 4], :C =&gt; [&quot;A&quot;, &quot;B&quot;], :D =&gt; [1.2, 2.2, 3.4], :E =&gt; [:a, :b, :c, :d])
DataStructures.OrderedDict{Symbol,Any} with 5 entries:
  :A =&gt; [1.0, 2.0]
  :B =&gt; [1, 2, 3, 4]
  :C =&gt; String[&quot;A&quot;, &quot;B&quot;]
  :D =&gt; [1.2, 2.2, 3.4]
  :E =&gt; Symbol[:a, :b, :c, :d]

julia&gt; expand_factors(A)
DataStructures.OrderedDict{Symbol,Any} with 7 entries:
  :A   =&gt; [1.0, 2.0]
  :B   =&gt; [1, 2, 3, 4]
  :C_1 =&gt; [0.0, 1.0]
  :D   =&gt; [1.2, 2.2, 3.4]
  :E_1 =&gt; [0.0, 1.0]
  :E_2 =&gt; [0.0, 1.0]
  :E_3 =&gt; [0.0, 1.0]
</code></pre></div><a class="source-link" target="_blank" href="https://github.com/phrb/ExperimentalDesign.jl/blob/4ab87f37a61d60245f5c5af36e7c20df91306428/src/d_optimal/modeling.jl#L258-L291">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExperimentalDesign.generate_model_matrix-Tuple{StatsModels.Formula,DataFrames.DataFrame,DataStructures.OrderedDict}" href="#ExperimentalDesign.generate_model_matrix-Tuple{StatsModels.Formula,DataFrames.DataFrame,DataStructures.OrderedDict}"><code>ExperimentalDesign.generate_model_matrix</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">generate_model_matrix(formula::Formula,
                      design::Array{Float64, 2},
                      factors::OrderedDict;
                      scale::Function = scale_boxdraper_encoding!)</code></pre><p>Generate a <code>DataFrame</code> with a scaled model matrix for a given formula, design and factors.</p><p>Assumes that <code>formula</code> is a linear relationship between all the factors in <code>factors</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using ExperimentalDesign, DataStructures, StatsModels

julia&gt; A = plackett_burman(4)
4×3 Array{Int64,2}:
  1   1   1
  1  -1  -1
 -1  -1   1
 -1   1  -1

julia&gt; factors = OrderedDict([(:f1, [-1., 1.]), (:f2, [-1., 1.]), (:f3, [-1., 1.])])
DataStructures.OrderedDict{Symbol,Array{Float64,1}} with 3 entries:
  :f1 =&gt; [-1.0, 1.0]
  :f2 =&gt; [-1.0, 1.0]
  :f3 =&gt; [-1.0, 1.0]

julia&gt; m = generate_model_matrix(@formula(y ~ f1 + f2 + f3), float(A), factors)
4×4 Array{Float64,2}:
 1.0   1.0   1.0   1.0
 1.0   1.0  -1.0  -1.0
 1.0  -1.0  -1.0   1.0
 1.0  -1.0   1.0  -1.0
</code></pre></div><a class="source-link" target="_blank" href="https://github.com/phrb/ExperimentalDesign.jl/blob/4ab87f37a61d60245f5c5af36e7c20df91306428/src/d_optimal/modeling.jl#L306-L342">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExperimentalDesign.get_expanded_values-Tuple{DataStructures.OrderedDict}" href="#ExperimentalDesign.get_expanded_values-Tuple{DataStructures.OrderedDict}"><code>ExperimentalDesign.get_expanded_values</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">get_expanded_values(factors::OrderedDict)</code></pre><p>Return a mapping from an original level of a factor to a column in an expanded design. Does not expand factors.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using ExperimentalDesign, DataStructures, StatsModels

julia&gt; A = OrderedDict(:A =&gt; [1., 2.], :B =&gt; [1, 2, 3, 4], :C =&gt; [&quot;A&quot;, &quot;B&quot;], :D =&gt; [1.2, 2.2, 3.4], :E =&gt; [:a, :b, :c, :d])
DataStructures.OrderedDict{Symbol,Any} with 5 entries:
  :A =&gt; [1.0, 2.0]
  :B =&gt; [1, 2, 3, 4]
  :C =&gt; String[&quot;A&quot;, &quot;B&quot;]
  :D =&gt; [1.2, 2.2, 3.4]
  :E =&gt; Symbol[:a, :b, :c, :d]

julia&gt; get_expanded_values(A)
DataStructures.OrderedDict{Any,Any} with 2 entries:
  :C =&gt; DataStructures.OrderedDict{Any,Symbol}(&quot;B&quot;=&gt;:C_1)
  :E =&gt; DataStructures.OrderedDict{Any,Symbol}(:b=&gt;:E_1,:c=&gt;:E_2,:d=&gt;:E_3)
</code></pre></div><a class="source-link" target="_blank" href="https://github.com/phrb/ExperimentalDesign.jl/blob/4ab87f37a61d60245f5c5af36e7c20df91306428/src/d_optimal/modeling.jl#L199-L224">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExperimentalDesign.scale_boxdraper_encoding!-Union{Tuple{Array{Float64,2},Array{T,1}}, Tuple{T}} where T" href="#ExperimentalDesign.scale_boxdraper_encoding!-Union{Tuple{Array{Float64,2},Array{T,1}}, Tuple{T}} where T"><code>ExperimentalDesign.scale_boxdraper_encoding!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">scale_boxdraper_encoding!(design::Array{Float64, 2},
                          factors::Array{T, 1};
                          scale_denominator = true) where T &lt;: Any</code></pre><p>Scale factors of a design using the Box and Draper&#39;s coding convention from &quot;Response Surfaces, Mixtures, and Ridge Analyses&quot;.</p><p><strong>Examples</strong></p><p>With denominator scaling:</p><pre><code class="language-julia-repl">julia&gt; using ExperimentalDesign, DataStructures, StatsModels

julia&gt; A = float(plackett_burman(4))
4×3 Array{Float64,2}:
  1.0   1.0   1.0
  1.0  -1.0  -1.0
 -1.0  -1.0   1.0
 -1.0   1.0  -1.0

julia&gt; factors = OrderedDict([(:f1, [-1., 1.]), (:f2, [-1., 1.]), (:f3, [-1., 1.])])
DataStructures.OrderedDict{Symbol,Array{Float64,1}} with 3 entries:
  :f1 =&gt; [-1.0, 1.0]
  :f2 =&gt; [-1.0, 1.0]
  :f3 =&gt; [-1.0, 1.0]

julia&gt; scale_boxdraper_encoding!(A, collect(values(factors)))
4×3 Array{Float64,2}:
  1.0   1.0   1.0
  1.0  -1.0  -1.0
 -1.0  -1.0   1.0
 -1.0   1.0  -1.0

julia&gt; all([isapprox(1.0, sqrt(sum(A[:, i] .^ 2.0) / size(A, 1))) for i = 1:size(A, 2)])
true
</code></pre><p>Without denominator scaling:</p><pre><code class="language-julia-repl">julia&gt; using ExperimentalDesign, DataStructures, StatsModels

julia&gt; A = float(plackett_burman(4))
4×3 Array{Float64,2}:
  1.0   1.0   1.0
  1.0  -1.0  -1.0
 -1.0  -1.0   1.0
 -1.0   1.0  -1.0

julia&gt; factors = OrderedDict([(:f1, [-1., 1.]), (:f2, [-1., 1.]), (:f3, [-1., 1.])])
DataStructures.OrderedDict{Symbol,Array{Float64,1}} with 3 entries:
  :f1 =&gt; [-1.0, 1.0]
  :f2 =&gt; [-1.0, 1.0]
  :f3 =&gt; [-1.0, 1.0]

julia&gt; scale_boxdraper_encoding!(A, collect(values(factors)), scale_denominator = false)
4×3 Array{Float64,2}:
  0.5   0.5   0.5
  0.5  -0.5  -0.5
 -0.5  -0.5   0.5
 -0.5   0.5  -0.5

julia&gt; all([isapprox(1.0, sqrt(sum(A[:, i] .^ 2.0))) for i = 1:size(A, 2)])
true
</code></pre><p><strong>Formula</strong></p><p>For a design <span>$D_{n,p}$</span> with <span>$n$</span> experiments or rows and <span>$p$</span> factors or columns, scale each factor <span>$\mathbf{x}_i$</span> to <span>$\mathbf{x}_{i}^{s}$</span> according to:</p><div>\[\mathbf{x}_{i}^{s} = \dfrac{\mathbf{x}_i - \bar{\mathbf{x}}_i}{S_i}\]</div><p>Where <span>$\bar{\mathbf{x}}_i$</span> is mean of factor definition values in the <code>factors</code> parameter and:</p><div>\[S_{i}^{2} = \dfrac{1}{n} \sum\limits_{j = 1}^{n}{(x_{ij} - \bar{\mathbf{x}}_i)^{2}}\]</div><p>If we pass <code>scale_denominator = false</code>, <span>$S_i$</span> becomes:</p><div>\[S_{i}^{2} = \sum\limits_{j = 1}^{n}{(x_{ij} - \bar{\mathbf{x}}_i)^{2}}\]</div></div><a class="source-link" target="_blank" href="https://github.com/phrb/ExperimentalDesign.jl/blob/4ab87f37a61d60245f5c5af36e7c20df91306428/src/d_optimal/modeling.jl#L81-L173">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="ExperimentalDesign.scale_orthogonal!-Union{Tuple{Array{Float64,2},Array{T,1}}, Tuple{T}} where T" href="#ExperimentalDesign.scale_orthogonal!-Union{Tuple{Array{Float64,2},Array{T,1}}, Tuple{T}} where T"><code>ExperimentalDesign.scale_orthogonal!</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">scale_orthogonal!(design::Array{Float64, 2}, factors::Array{T, 1}) where T &lt;: Any</code></pre><p>Orthogonally scale and center factors of a design using design and factor limits.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl">julia&gt; using ExperimentalDesign, DataStructures, StatsModels

julia&gt; A = [5. 2. -1.; 5. 3. 0.; -5. 1. -2.]
3×3 Array{Float64,2}:
  5.0  2.0  -1.0
  5.0  3.0   0.0
 -5.0  1.0  -2.0

julia&gt; factors = OrderedDict([(:f1, [-5., 0., 5.]), (:f2, [1., 2., 3.]), (:f3, [-2., -1., 0.])])
DataStructures.OrderedDict{Symbol,Array{Float64,1}} with 3 entries:
  :f1 =&gt; [-5.0, 0.0, 5.0]
  :f2 =&gt; [1.0, 2.0, 3.0]
  :f3 =&gt; [-2.0, -1.0, 0.0]

julia&gt; scale_orthogonal!(A, collect(values(factors)))
3×3 Array{Float64,2}:
  1.0   0.0   0.0
  1.0   1.0   1.0
 -1.0  -1.0  -1.0

julia&gt; A
3×3 Array{Float64,2}:
  1.0   0.0   0.0
  1.0   1.0   1.0
 -1.0  -1.0  -1.0
</code></pre><p><strong>Formula</strong></p><p>For a design <span>$D_{n,p}$</span> with <span>$n$</span> experiments or rows and <span>$p$</span> factors or columns, scale each factor <span>$\mathbf{x}_i$</span> to <span>$\mathbf{x}_{i}^{s}$</span> according to:</p><div>\[\mathbf{x}_{i}^{s} = \dfrac{\mathbf{x}_i - \bar{M}}{\bar{M}_{def}}\]</div><p>Where <span>$\mathbf{x}_{def}$</span> is the factor defined in the <code>factors</code> parameter and:</p><div>\[\bar{M} = (max(\mathbf{x}_i) + min(\mathbf{x}_i)) / 2\]</div><div>\[\bar{M}_{def} = (max(\mathbf{x}_{def}) - min(\mathbf{x}_{def})) / 2\]</div></div><a class="source-link" target="_blank" href="https://github.com/phrb/ExperimentalDesign.jl/blob/4ab87f37a61d60245f5c5af36e7c20df91306428/src/d_optimal/modeling.jl#L13-L69">source</a></section><footer><hr/></footer></article></body></html>
